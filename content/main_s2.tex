\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath, amssymb, stmaryrd}
\usepackage{xcolor}
\usepackage[margin=2.5cm]{geometry}
\usepackage{fancybox}
\usepackage{needspace}

\usepackage{tocloft}
\setlength{\cftbeforesecskip}{0.9cm} % Ajuste la valeur (ex: 1em, 15pt, etc.)

\setlength{\cftbeforesubsecskip}{0.05cm}

\usepackage[nobottomtitles*]{titlesec} % On ajoute l'option à l'import
\renewcommand{\bottomtitlespace}{2cm}

% Définition des couleurs
\definecolor{questionblue}{RGB}{0, 0, 205}

%cache les rectangles rouge sde sliens

% Sécurité : Définit l'espace nécessaire AVANT chaque titre
\newcommand{\sectionbreak}{\needspace{6\baselineskip}}
\newcommand{\subsectionbreak}{\needspace{10\baselineskip}}
\newcommand{\subsubsectionbreak}{\needspace{5\baselineskip}}


% Configuration des titres pour correspondre à ton style (1.1 en Bleu)
% Sections (Semaines)
\titleformat{\section}
  {\normalfont\Large\bfseries\color{black}}{\thesection}{1em}{}
  % Subsections (Exercices) 
\titleformat{\subsection}
  {\normalfont\large\bfseries\color{questionblue}}{\thesubsection}{1em}{}
% Subsubsections (Questions) 
\renewcommand{\thesubsubsection}{\alph{subsubsection})}
\titleformat{\subsubsection}
  {\normalfont\large\bfseries\color{questionblue}}{\thesubsubsection}{0.5em}{}


%\pretocmd{\section}{\addtocontents{toc}{\protect\filbreak}}{}{}



% Redéfinition de la numérotation des sous-sections
\renewcommand{\thesubsection}{\arabic{subsection}}
\setcounter{tocdepth}{2}

% Hyperref chargé en dernier
\usepackage{hyperref}
\hypersetup{hidelinks}

% Définir les symboles Unicode pour les bookmarks PDF
\pdfstringdefDisableCommands{%
  \def\int{∫}%
  \def\sum{∑}%
  \def\prod{∏}%
  \def\infty{∞}%
  \def\partial{∂}%
  \def\leq{≤}%
  \def\geq{≥}%
  \def\neq{≠}%
  \def\approx{≈}%
  \def\times{×}%
  \def\cdot{·}%
  \def\mathbb#1{#1}%
  \def\mathcal#1{#1}%
  \def\vec#1{#1}%
}

% Configuration de l'en-tête avec fancyhdr
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} % Efface tous les en-têtes et pieds de page
\fancyhead[L]{Semaine 2 - Suites et séries numériques} % En-tête à gauche
\fancyfoot[C]{\thepage} % Numéro de page au centre du pied de page
\renewcommand{\headrulewidth}{0pt} % Supprime la ligne de séparation

\begin{document}

\title{Semaine 2 - Suites et séries numériques\\
\large PSI}
\date{}
\maketitle
\tableofcontents

\clearpage \input{s2/ex1}
\clearpage \input{s2/ex2}
\clearpage \input{s2/ex3}
\clearpage \input{s2/ex4}
\clearpage \input{s2/ex5}
\clearpage \input{s2/ex6}
\clearpage \input{s2/ex7}


\addtocontents{toc}{\protect\newpage}


\end{document}
